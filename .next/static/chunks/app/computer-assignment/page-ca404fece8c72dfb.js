(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[100],{470:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>d});var r=s(5155),t=s(5695),o=s(2115),l=s(3464),n=s(6766);function d(){let e=(0,t.useRouter)(),[a,s]=(0,o.useState)([]),[d,i]=(0,o.useState)(""),[u,c]=(0,o.useState)(""),[m,g]=(0,o.useState)(""),[h,x]=(0,o.useState)(!0),[b,p]=(0,o.useState)(!1),[f,v]=(0,o.useState)(null),[y,j]=(0,o.useState)(null);(0,o.useEffect)(()=>{(async()=>{x(!0),v(null);try{let e=(await l.A.get("http://localhost:4000/personnel-management/get-users")).data.filter(e=>"aprobado"===e.status.toLowerCase());s(e)}catch(e){console.error("Error fetching users:",e),v("No se pudieron cargar los usuarios. Int\xe9ntelo m\xe1s tarde.")}finally{x(!1)}})()},[]);let N=async a=>{if(a.preventDefault(),j(null),!d)return void j("Por favor, seleccione un colaborador.");if(!u.trim())return void j("Por favor, ingrese el n\xfamero de serie del equipo.");p(!0);let s={user_id:d,serial_number:u,assigned_at:m};m&&(s.assigned_at=m);try{await l.A.post("http://localhost:4000/personnel-management/create-assignment",s),alert("Computador asignado exitosamente!"),e.push("/team-management")}catch(a){console.error("Error al asignar computador:",a);let e="Error de red o al procesar la solicitud de asignaci\xf3n.";if(l.A.isAxiosError(a)&&a.response){var r,t;e=(null==(r=a.response.data)?void 0:r.error)||(null==(t=a.response.data)?void 0:t.message)||"Error desconocido al asignar el computador."}j(e)}finally{p(!1)}};return(0,r.jsxs)("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-xl w-full max-w-2xl mx-auto my-8",children:[(0,r.jsxs)("div",{className:"flex items-center mb-6",children:[(0,r.jsx)("div",{className:"bg-blue-600 p-3 rounded-full mr-4",children:(0,r.jsx)(n.default,{className:"size-12 shrink-0",src:"/img/computer-svgrepo-com.svg",alt:"Asignaci\xf3n de Computador",width:48,height:48})}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-700",children:"Asignaci\xf3n de Computador"})]}),(0,r.jsx)("p",{className:"text-gray-600 text-sm mb-6",children:"Asigne un equipo de c\xf3mputo a un nuevo ingreso."}),(0,r.jsxs)("form",{onSubmit:N,children:[(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"usuario",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del Colaborador"}),h?(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Cargando usuarios..."}):f?(0,r.jsx)("p",{className:"mt-1 text-sm text-red-500",children:f}):(0,r.jsxs)("select",{name:"usuario",id:"usuario",value:d,onChange:e=>{i(e.target.value)},className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0,disabled:0===a.length,children:[(0,r.jsx)("option",{value:"",disabled:!0,children:"Seleccione un usuario"}),a.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id)),0===a.length&&!h&&!f&&(0,r.jsx)("option",{value:"",disabled:!0,children:"No hay usuarios aprobados"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"serial",className:"block text-sm font-medium text-gray-700 mb-1",children:"N\xfamero de Serie"}),(0,r.jsx)("input",{type:"text",name:"serial",id:"serial",value:u,onChange:e=>{c(e.target.value)},className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Ej: SN123456789",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"fechaEntrega",className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Entrega"}),(0,r.jsx)("input",{type:"date",name:"fechaEntrega",id:"fechaEntrega",value:m,onChange:e=>{g(e.target.value)},className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})]}),y&&(0,r.jsx)("p",{className:"text-red-500 text-sm mt-4",children:y}),(0,r.jsx)("div",{className:"mt-8 pt-5 border-t border-gray-200",children:(0,r.jsxs)("div",{className:"flex justify-end",children:[(0,r.jsx)("button",{type:"button",onClick:()=>e.push("/team-management"),className:"bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold py-2 px-4 rounded-lg mr-3 transition duration-200",children:"Cancelar"}),(0,r.jsx)("button",{type:"submit",disabled:b||h||0===a.length,className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75 transition duration-200 disabled:opacity-50",children:b?"Asignando...":"Asignar Computador"})]})})]})]})}},7751:(e,a,s)=>{Promise.resolve().then(s.bind(s,470))}},e=>{var a=a=>e(e.s=a);e.O(0,[794,766,441,684,358],()=>a(7751)),_N_E=e.O()}]);