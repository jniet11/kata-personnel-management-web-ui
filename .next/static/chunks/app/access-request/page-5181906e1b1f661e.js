(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[949],{3554:(e,s,a)=>{Promise.resolve().then(a.bind(a,9563))},9563:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>n});var l=a(5155),t=a(5695),r=a(2115),c=a(3464);function n(){let e=(0,t.useRouter)(),[s,a]=(0,r.useState)([]),[n,o]=(0,r.useState)(""),[i,u]=(0,r.useState)(!0),[d,m]=(0,r.useState)(!1),[x,h]=(0,r.useState)(null),[b,p]=(0,r.useState)(null),[f,g]=(0,r.useState)([]);(0,r.useEffect)(()=>{(async()=>{u(!0),h(null);try{let e=(await c.A.get("http://localhost:4000/personnel-management/get-users")).data.filter(e=>"aprobado"===e.status.toLowerCase());a(e)}catch(e){console.error("Error fetching users:",e),h("No se pudieron cargar los usuarios. Int\xe9ntelo m\xe1s tarde.")}finally{u(!1)}})()},[]);let j=e=>{let{value:s,checked:a}=e.target;g(e=>a?[...e,s]:e.filter(e=>e!==s))},v=async s=>{if(s.preventDefault(),p(null),!n)return void p("Por favor, seleccione un usuario.");if(0===f.length)return void p("Por favor, seleccione al menos un tipo de acceso.");m(!0);let a=f.join(", ");try{console.log("Los datos enviados son: ",{user_id:n,access_type:a}),await c.A.post("http://localhost:4000/personnel-management/create-access-request",{user_id:n,access_type:a}),alert("Solicitud de acceso creada exitosamente!"),e.push("/team-management")}catch(e){if(console.error("Error creating access request:",e),c.A.isAxiosError(e)&&e.response){var l;p((null==(l=e.response.data)?void 0:l.error)||"Error al crear la solicitud.")}else p("Error de red o al procesar la solicitud.")}finally{m(!1)}};return(0,l.jsxs)("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-xl w-full max-w-2xl mx-auto my-8",children:[(0,l.jsxs)("div",{className:"flex items-center mb-6",children:[(0,l.jsx)("div",{className:"bg-blue-600 p-3 rounded-full mr-4",children:(0,l.jsx)("img",{className:"size-12 shrink-0",src:"/img/airplane-svgrepo-com.svg"})}),(0,l.jsx)("h1",{className:"text-2xl font-bold text-gray-700",children:"Solicitud de Accesos"})]}),(0,l.jsx)("p",{className:"text-gray-600 text-sm mb-6",children:"Complete este formulario para solicitar acceso a aplicaciones o sistemas."}),(0,l.jsxs)("form",{onSubmit:v,children:[(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"usuario",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del Usuario"}),i?(0,l.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Cargando usuarios..."}):x?(0,l.jsx)("p",{className:"mt-1 text-sm text-red-500",children:x}):(0,l.jsxs)("select",{name:"usuario",id:"usuario",value:n,onChange:e=>{o(e.target.value)},className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0,children:[(0,l.jsx)("option",{value:"",disabled:!0,children:"Seleccione un usuario"}),s.length>0?s.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id)):(0,l.jsx)("option",{value:"",disabled:!0,children:"No hay usuarios aprobados disponibles"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"tipoUsuario",className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Usuario"}),(0,l.jsxs)("select",{name:"tipoUsuario",id:"tipoUsuario",className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[(0,l.jsx)("option",{value:"",children:"Seleccione un tipo"}),(0,l.jsx)("option",{value:"PM",children:"PM"}),(0,l.jsx)("option",{value:"UX",children:"UX"}),(0,l.jsx)("option",{value:"QA",children:"QA"}),(0,l.jsx)("option",{value:"Scrum Master",children:"Scrum Master"}),(0,l.jsx)("option",{value:"Developer",children:"Developer"}),(0,l.jsx)("option",{value:"BA",children:"BA"}),(0,l.jsx)("option",{value:"DevOps",children:"DevOps"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Accesos Solicitados"}),(0,l.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,l.jsxs)("label",{className:"inline-flex items-center",children:[(0,l.jsx)("input",{type:"checkbox",value:"GitHub",checked:f.includes("GitHub"),onChange:j,className:"form-checkbox text-blue-600 focus:ring-blue-500"}),(0,l.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"GitHub"})]}),(0,l.jsxs)("label",{className:"inline-flex items-center",children:[(0,l.jsx)("input",{type:"checkbox",value:"Grafana",checked:f.includes("Grafana"),onChange:j,className:"form-checkbox text-blue-600 focus:ring-blue-500"}),(0,l.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Grafana"})]}),(0,l.jsxs)("label",{className:"inline-flex items-center",children:[(0,l.jsx)("input",{type:"checkbox",value:"AWS",checked:f.includes("AWS"),onChange:j,className:"form-checkbox text-blue-600 focus:ring-blue-500"}),(0,l.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"AWS"})]}),(0,l.jsxs)("label",{className:"inline-flex items-center",children:[(0,l.jsx)("input",{type:"checkbox",value:"Confluence",checked:f.includes("Confluence"),onChange:j,className:"form-checkbox text-blue-600 focus:ring-blue-500"}),(0,l.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Confluence"})]}),(0,l.jsxs)("label",{className:"inline-flex items-center",children:[(0,l.jsx)("input",{type:"checkbox",value:"Figma",checked:f.includes("Figma"),onChange:j,className:"form-checkbox text-blue-600 focus:ring-blue-500"}),(0,l.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Figma"})]}),(0,l.jsxs)("label",{className:"inline-flex items-center",children:[(0,l.jsx)("input",{type:"checkbox",value:"JFROG",checked:f.includes("JFROG"),onChange:j,className:"form-checkbox text-blue-600 focus:ring-blue-500"}),(0,l.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"JFROG"})]})]})]})]}),b&&(0,l.jsx)("p",{className:"text-red-500 text-sm mt-4",children:b}),(0,l.jsx)("div",{className:"mt-8 pt-5 border-t border-gray-200",children:(0,l.jsxs)("div",{className:"flex justify-end",children:[(0,l.jsx)("button",{type:"button",onClick:()=>e.push("/team-management"),className:"bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold py-2 px-4 rounded-lg mr-3 transition duration-200",children:"Cancelar"}),(0,l.jsx)("button",{type:"submit",disabled:d||i,className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75 transition duration-200 disabled:opacity-50",children:d?"Enviando...":"Enviar Solicitud"})]})})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[794,441,684,358],()=>s(3554)),_N_E=e.O()}]);